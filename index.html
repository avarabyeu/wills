<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Wills by avarabyeu</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Wills</h1>
        <h2>Useful utils built on top of Guava&#39;s ListenableFuture </h2>
        <a href="https://github.com/avarabyeu/wills" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="wills--" class="anchor" href="#wills--"><span class="octicon octicon-link"></span></a>wills <a href="https://travis-ci.org/avarabyeu/wills"><img src="https://travis-ci.org/avarabyeu/wills.svg?branch=master" alt="Build Status"></a> <a href="https://maven-badges.herokuapp.com/maven-central/com.github.avarabyeu/wills"><img src="https://maven-badges.herokuapp.com/maven-central/com.github.avarabyeu/wills/badge.svg" alt="Maven central"></a>
</h1>

<p>Useful utils built on top of Guava's ListenableFuture</p>

<ul>
<li><a href="#maven-dependencies">Maven Dependencies</a></li>
<li><a href="#the-problem-wills-solve">The problem 'wills' solve</a></li>
<li>
<a href="#creation">Creation</a>

<ul>
<li><a href="#from-jdks-future">from JKSs Future</a></li>
<li><a href="#from-guavas-listenablefuture">from Guava's Future</a></li>
<li><a href="#decorating-executorservice">Decorating ExecutorService</a></li>
</ul>
</li>
<li>
<a href="#callbacks">Callbacks</a>

<ul>
<li><a href="#whensuccessful">whenSuccessful</a></li>
<li><a href="#whenfailed">whenFailed</a></li>
<li><a href="#whendone">whenDone</a></li>
</ul>
</li>
<li>
<a href="#fallback-replacing-future-in-case-of-failure">Fallback (Replacing Future in case of failure)</a> </li>
</ul>

<h2>
<a name="maven-dependencies" class="anchor" href="#maven-dependencies"><span class="octicon octicon-link"></span></a>Maven Dependencies</h2>

<p>Last stable version:</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>com.github.avarabyeu<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>wills<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.0.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<h2>
<a name="the-problem-wills-solve" class="anchor" href="#the-problem-wills-solve"><span class="octicon octicon-link"></span></a>The problem 'wills' solve</h2>

<p>Google did perfect job releasing Guava - set of very useful utilities for collections, I/O, concurrency and others java APIs.
Guava's concurrency utilities helps to solve widely used cases such as adding callbacks, transforming/filtering futures. 
But, sometimes it looks a bit ridiculous. Just take a look:</p>

<div class="highlight highlight-java"><pre><span class="n">ListeningExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">MoreExecutors</span>
            <span class="o">.</span><span class="na">listeningDecorator</span><span class="o">(</span><span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
<span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">executorService</span>
            <span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">SomeCallable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;());</span>
<span class="n">Futures</span><span class="o">.</span><span class="na">addCallback</span><span class="o">(</span><span class="n">future</span><span class="o">,</span> <span class="k">new</span> <span class="n">FutureCallback</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="n">String</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"I'm successful!"</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailure</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"I'm not!"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span>

</pre></div>

<p>Too much lines of code, right? Adding callbacks via Futures make sense if you want to add several ones. But what if you need to add just one?
This is what 'wills' do for you:</p>

<div class="highlight highlight-java"><pre><span class="n">WillExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">WillExecutors</span>
            <span class="o">.</span><span class="na">willDecorator</span><span class="o">(</span><span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
<span class="n">Will</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">executorService</span>
            <span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">SomeCallable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;())</span>
<span class="o">.</span><span class="na">whenSuccessful</span><span class="o">(</span><span class="k">new</span> <span class="n">Action</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"I'm OK!"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}).</span><span class="na">whenFailed</span><span class="o">(</span><span class="k">new</span> <span class="n">Action</span><span class="o">&lt;</span><span class="n">Throwable</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">throwable</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"I'm not!"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

<p>or even more simple in JDK8 style:</p>

<div class="highlight highlight-java"><pre>
<span class="n">executorService</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">SomeCallable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;())</span>
     <span class="o">.</span><span class="na">whenSuccessful</span><span class="o">(</span><span class="n">result</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"I'm OK!"</span><span class="o">))</span>
     <span class="o">.</span><span class="na">whenFailed</span><span class="o">(</span><span class="n">throwable</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"I'm not!"</span><span class="o">));</span>

</pre></div>

<p>Another words, <strong>using 'wills' you are able to build chained method calls</strong> which makes code cleaner and faster to implement.
Actually, com.github.avarabyeu.wills.Will interface extends Guava's ListanableFuture with some useful convenience methods.
Go through documentation to find out explanation about them.</p>

<h2>
<a name="creation" class="anchor" href="#creation"><span class="octicon octicon-link"></span></a>Creation</h2>

<h3>
<a name="from-jdks-future" class="anchor" href="#from-jdks-future"><span class="octicon octicon-link"></span></a>from JDKs Future</h3>

<div class="highlight highlight-java"><pre><span class="n">Future</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">Will</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">will</span> <span class="o">=</span> <span class="n">Wills</span><span class="o">.</span><span class="na">forFuture</span><span class="o">(</span><span class="n">future</span><span class="o">);</span>
</pre></div>

<h3>
<a name="from-guavas-listenablefuture" class="anchor" href="#from-guavas-listenablefuture"><span class="octicon octicon-link"></span></a>from Guava's ListenableFuture</h3>

<div class="highlight highlight-java"><pre><span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">Will</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">will</span> <span class="o">=</span> <span class="n">Wills</span><span class="o">.</span><span class="na">forListenableFuture</span><span class="o">(</span><span class="n">future</span><span class="o">);</span>
</pre></div>

<h3>
<a name="decorating-executorservice" class="anchor" href="#decorating-executorservice"><span class="octicon octicon-link"></span></a>Decorating ExecutorService</h3>

<p>This is most simple way to work with 'wills':</p>

<div class="highlight highlight-java"><pre><span class="n">WillExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">WillExecutors</span><span class="o">.</span><span class="na">willDecorator</span><span class="o">(</span><span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>
<span class="n">Will</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">will</span> <span class="o">=</span> <span class="n">executorService</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Hello world!"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

<h2>
<a name="callbacks" class="anchor" href="#callbacks"><span class="octicon octicon-link"></span></a>Callbacks</h2>

<h3>
<a name="whensuccessful" class="anchor" href="#whensuccessful"><span class="octicon octicon-link"></span></a>whenSuccessful</h3>

<p>Executes some action once Future is done.</p>

<p>Example:</p>

<div class="highlight highlight-java"><pre><span class="n">Will</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">will</span> <span class="o">=</span> <span class="n">Wills</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"SOME RESULT"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">whenSuccessful</span><span class="o">(</span><span class="k">new</span> <span class="n">Action</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">doSomething</span><span class="o">():</span>
        <span class="o">}</span>
<span class="o">});</span>

</pre></div>

<p>Example (JDK8):</p>

<div class="highlight highlight-java"><pre><span class="n">Wills</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"SOME RESULT"</span><span class="o">).</span><span class="na">whenSuccessful</span><span class="o">(</span><span class="n">result</span> <span class="o">-&gt;</span> <span class="n">doSomething</span><span class="o">());</span>

</pre></div>

<p>Guava's analogue:</p>

<div class="highlight highlight-java"><pre><span class="n">ListenableFuture</span><span class="o">&lt;?&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">Futures</span><span class="o">.</span><span class="na">immediateFuture</span><span class="o">(</span><span class="s">"SOME RESULT"</span><span class="o">);</span>
<span class="n">Futures</span><span class="o">.</span><span class="na">addCallback</span><span class="o">(</span><span class="n">future</span><span class="o">,</span> <span class="k">new</span> <span class="n">FutureCallback</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="n">Object</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">doSomething</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailure</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//do nothing</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

<h3>
<a name="whenfailed" class="anchor" href="#whenfailed"><span class="octicon octicon-link"></span></a>whenFailed</h3>

<p>Executes some action in case Future is failed</p>

<p>Example:</p>

<div class="highlight highlight-java"><pre><span class="n">Will</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">will</span> <span class="o">=</span> <span class="n">Wills</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"SOME RESULT"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">whenFailed</span><span class="o">(</span><span class="k">new</span> <span class="n">Action</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">doSomething</span><span class="o">():</span>
        <span class="o">}</span>
<span class="o">});</span>

</pre></div>

<p>Example (JDK8):</p>

<div class="highlight highlight-java"><pre><span class="n">Wills</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"SOME RESULT"</span><span class="o">).</span><span class="na">whenFailed</span><span class="o">(</span><span class="n">result</span> <span class="o">-&gt;</span> <span class="n">doSomething</span><span class="o">());</span>

</pre></div>

<p>Guava's analogue:</p>

<div class="highlight highlight-java"><pre><span class="n">ListenableFuture</span><span class="o">&lt;?&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">Futures</span><span class="o">.</span><span class="na">immediateFuture</span><span class="o">(</span><span class="s">"SOME RESULT"</span><span class="o">);</span>
<span class="n">Futures</span><span class="o">.</span><span class="na">addCallback</span><span class="o">(</span><span class="n">future</span><span class="o">,</span> <span class="k">new</span> <span class="n">FutureCallback</span><span class="o">&lt;</span><span class="n">Object</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="n">Object</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">//do nothing</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailure</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">doSomething</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

<h3>
<a name="whendone" class="anchor" href="#whendone"><span class="octicon octicon-link"></span></a>whenDone</h3>

<p>Executes some action once Future is completed. Doesn't matter successful or not.
Here action is boolean-type, because there will be passed execution result (TRUE in case if future execution is successful)</p>

<p>Example:</p>

<div class="highlight highlight-java"><pre><span class="n">Will</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">will</span> <span class="o">=</span> <span class="n">Wills</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"SOME RESULT"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">whenDone</span><span class="o">(</span><span class="k">new</span> <span class="n">Action</span><span class="o">&lt;</span><span class="n">Boolean</span><span class="o">&gt;()</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">apply</span><span class="o">(</span><span class="n">Boolean</span> <span class="n">successful</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">doSomething</span><span class="o">():</span>
        <span class="o">}</span>
<span class="o">});</span>

</pre></div>

<p>Example (JDK8):</p>

<div class="highlight highlight-java"><pre><span class="n">Wills</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"SOME RESULT"</span><span class="o">).</span><span class="na">whenDone</span><span class="o">(</span><span class="n">successful</span> <span class="o">-&gt;</span> <span class="n">doSomething</span><span class="o">());</span>

</pre></div>

<p>Guava's analogue: There is no direct analogue. You can only can add the following callback:</p>

<div class="highlight highlight-java"><pre><span class="k">new</span> <span class="n">FutureCallback</span><span class="o">&lt;</span><span class="n">A</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onSuccess</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="n">A</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">action</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onFailure</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">action</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

<h2>
<a name="fallback-replacing-future-in-case-of-failure" class="anchor" href="#fallback-replacing-future-in-case-of-failure"><span class="octicon octicon-link"></span></a>Fallback (Replacing Future in case of failure)</h2>

<p>Sometimes you need something like default value for you Future. Guava's fallbacks mechanism 
is a good solution for such cases:</p>

<div class="highlight highlight-java"><pre><span class="n">ListeningExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">MoreExecutors</span><span class="o">.</span><span class="na">listeningDecorator</span><span class="o">(</span><span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>
<span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">future</span> <span class="o">=</span> <span class="n">executorService</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Hello world!"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">});</span>
<span class="n">future</span> <span class="o">=</span> <span class="n">Futures</span><span class="o">.</span><span class="na">withFallback</span><span class="o">(</span><span class="n">future</span><span class="o">,</span> <span class="k">new</span> <span class="n">FutureFallback</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">create</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Futures</span><span class="o">.</span><span class="na">immediateFuture</span><span class="o">(</span><span class="s">"NO RESULTS!"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

<p>Here is more simple version in Will style:</p>

<div class="highlight highlight-java"><pre><span class="n">WillExecutorService</span> <span class="n">executorService</span> <span class="o">=</span> <span class="n">WillExecutors</span><span class="o">.</span><span class="na">willDecorator</span><span class="o">(</span><span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="mi">10</span><span class="o">));</span>
<span class="n">Will</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">will</span> <span class="o">=</span> <span class="n">executorService</span><span class="o">.</span><span class="na">submit</span><span class="o">(</span><span class="k">new</span> <span class="n">Callable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Hello world!"</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}).</span><span class="na">replaceFailed</span><span class="o">(</span><span class="n">Wills</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"NO RESULTS!"</span><span class="o">));</span>        
</pre></div>

<p>if you wanna get access to future's exception, you still may use Guava's FutureFallback:</p>

<div class="highlight highlight-java"><pre>
<span class="n">will</span> <span class="o">=</span> <span class="n">will</span><span class="o">.</span><span class="na">replaceFailed</span><span class="o">(</span><span class="k">new</span> <span class="n">FutureFallback</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="n">ListenableFuture</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">create</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
         <span class="k">return</span> <span class="n">Wills</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"NO RESULTS!"</span><span class="o">);</span>
     <span class="o">}</span>
 <span class="o">});</span>
</pre></div>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/avarabyeu/wills/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/avarabyeu/wills/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/avarabyeu/wills"></a> is maintained by <a href="https://github.com/avarabyeu">avarabyeu</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
